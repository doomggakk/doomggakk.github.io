---
layout: single
title: "6.Service"
categories: [Kubernetes]
author_profile: true
excerpt: Kubernetes에서의 Service에 대해 정리한다.
---

## Service

- Service는 다양한 컴포넌트들끼리 내부적, 외부적으로 통신할 수 있도록 해줌
- 다른 어플리케이션이나 사용자와 연결될 수 있도록 도와주는 역할
ex) 프론트엔드, 백엔드, DB등이 서로 연결되어 통신하도록 함

### 외부 통신
---------------------------
- 외부에서 사용자가 Node에 올라가있는 Pod에 통신하는 방법
1. 사용자가 직접적으로 Pod 에 Ping을 하거나 접근할 수 없음<br>
-> 네트워크가 분리되었기 때문<br>
2. ssh 접속을 통해 k8s Node에 접속한뒤 curl로 Pod에 접속<br>
-> 이 방법보다 더 나은 방법을 위해 서비스가 필요<br>
3. Node에 Service를 구성하여 외부에서 바로 접속할 수 있도록 함 <br>
ex) https://192.168.1.2:30008로 접속하면 Service와 연결된 30008로 들어와 Pod와 연결

### Service의 종류
----------------------
1. NodePort
2. ClusterIP
3. Loadbalancer

<br>

### NodePort
------------------------
![NodePort 도식](/assets/img/kubernetes/6_service_1.png)
- **①**: TargetPort : 서비스와 연결할때 Pod에 해당하는 Port
- **②**: Port : 서비스와 Pod 연결할 때 서비스에 해당하는 Port
- **③** NodePort : Range 30000 - 32767 외부에서 접속시 필요한 Port

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  type: NodePort
  ports:
    - targetPort: 80  # ①
      port: 80        # ②
      nodePort: 30008 # ③
```
------------------
**◎ 참고자료**

- Udemy - Kubernetes for the Absolute Beginners - Hands-on
- [쿠버네티스 공식문서 - 서비스](https://kubernetes.io/ko/docs/concepts/services-networking/service/)